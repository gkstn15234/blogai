<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hugo 콘텐츠 에디터</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- TinyMCE -->
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/editor.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- 사이드바 -->
            <div class="col-md-3 sidebar">
                <div class="editor-header">
                    <h4><i class="fas fa-edit"></i> Hugo 콘텐츠 에디터</h4>
                </div>
                
                <!-- 메타 정보 입력 폼 -->
                <div class="meta-form">
                    <form id="contentForm">
                        <div class="form-group mb-3">
                            <label for="title">제목</label>
                            <input type="text" class="form-control" id="title" name="title" required>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="description">설명</label>
                            <textarea class="form-control" id="description" name="description" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="author">작성자</label>
                            <select class="form-control" id="author" name="author">
                                <option value="">작성자 선택</option>
                                <option value="김현지">김현지</option>
                                <option value="이경제">이경제</option>
                                <option value="박자동차">박자동차</option>
                                <option value="최뉴스">최뉴스</option>
                            </select>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="category">카테고리</label>
                            <select class="form-control" id="category" name="category">
                                <option value="">카테고리 선택</option>
                                <option value="automotive">자동차</option>
                                <option value="economy">경제</option>
                                <option value="news">뉴스</option>
                                <option value="analysis">분석</option>
                                <option value="policy">정책</option>
                            </select>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="tags">태그</label>
                            <input type="text" class="form-control" id="tags" name="tags" placeholder="태그를 콤마로 구분하여 입력">
                            <small class="form-text text-muted">예: 전기차, 정책, 경제성장</small>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="featured-image">대표 이미지</label>
                            <input type="file" class="form-control" id="featured-image" name="featured-image" accept="image/*">
                            <div id="image-preview" class="mt-2"></div>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="publishDate">발행일</label>
                            <input type="datetime-local" class="form-control" id="publishDate" name="publishDate">
                        </div>
                        
                        <div class="form-group mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="draft" name="draft">
                                <label class="form-check-label" for="draft">초안으로 저장</label>
                            </div>
                        </div>
                    </form>
                </div>
                
                <!-- 액션 버튼 -->
                <div class="editor-actions">
                    <button type="button" class="btn btn-primary btn-sm mb-2" onclick="previewContent()">
                        <i class="fas fa-eye"></i> 미리보기
                    </button>
                    <button type="button" class="btn btn-success btn-sm mb-2" onclick="generateMarkdown()">
                        <i class="fas fa-download"></i> 마크다운 생성
                    </button>
                    <button type="button" class="btn btn-secondary btn-sm mb-2" onclick="loadTemplate()">
                        <i class="fas fa-file-alt"></i> 템플릿 불러오기
                    </button>
                    <button type="button" class="btn btn-info btn-sm mb-2" onclick="saveToLocal()">
                        <i class="fas fa-save"></i> 로컬 저장
                    </button>
                </div>
                
                <!-- 템플릿 선택 -->
                <div class="template-section">
                    <h6>빠른 템플릿</h6>
                    <div class="template-buttons">
                        <button type="button" class="btn btn-outline-primary btn-sm" onclick="loadTemplate('automotive')">자동차 뉴스</button>
                        <button type="button" class="btn btn-outline-success btn-sm" onclick="loadTemplate('economy')">경제 분석</button>
                        <button type="button" class="btn btn-outline-info btn-sm" onclick="loadTemplate('policy')">정책 리포트</button>
                    </div>
                </div>
            </div>
            
            <!-- 메인 에디터 영역 -->
            <div class="col-md-9 main-editor">
                <div class="editor-toolbar">
                    <div class="toolbar-left">
                        <button type="button" class="btn btn-outline-secondary btn-sm" onclick="insertImage()">
                            <i class="fas fa-image"></i> 이미지 삽입
                        </button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" onclick="insertTable()">
                            <i class="fas fa-table"></i> 표 삽입
                        </button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" onclick="insertQuote()">
                            <i class="fas fa-quote-left"></i> 인용구
                        </button>
                    </div>
                    <div class="toolbar-right">
                        <span class="word-count">단어 수: <span id="wordCount">0</span></span>
                        <span class="char-count">문자 수: <span id="charCount">0</span></span>
                    </div>
                </div>
                
                <!-- TinyMCE 에디터 -->
                <div id="editor-container">
                    <textarea id="content-editor" name="content"></textarea>
                </div>
                
                <!-- 미리보기 영역 -->
                <div id="preview-container" class="mt-4" style="display: none;">
                    <h5>미리보기</h5>
                    <div id="preview-content" class="preview-content"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 모달 다이얼로그 -->
    <div class="modal fade" id="imageModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">이미지 삽입</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="imageUrl" class="form-label">이미지 URL</label>
                        <input type="url" class="form-control" id="imageUrl" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="mb-3">
                        <label for="imageUpload" class="form-label">또는 파일 업로드</label>
                        <input type="file" class="form-control" id="imageUpload" accept="image/*">
                    </div>
                    <div class="mb-3">
                        <label for="imageAlt" class="form-label">대체 텍스트</label>
                        <input type="text" class="form-control" id="imageAlt" placeholder="이미지 설명">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                    <button type="button" class="btn btn-primary" onclick="insertImageFromModal()">삽입</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="/js/image-utils.js"></script>
    <script src="/js/editor.js"></script>
</body>
</html> 